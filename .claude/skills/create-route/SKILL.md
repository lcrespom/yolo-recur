---
name: create-route
description:
  Create a new TanStack Router page with proper data fetching, loading/error states, and
  DaisyUI styling
argument-hint: [route-path]
allowed-tools: Read, Glob, Grep, Write, Edit, Bash(npx tsc:*), Bash(npx vitest:*)
---

# Create TanStack Router Page

Create a new route page at `src/routes/$ARGUMENTS.tsx` following the project's TanStack
Router file-based routing conventions.

The argument is the route path (e.g., `settings/index` for `/settings`, or
`payments/$paymentId` for a dynamic route).

## Requirements

1. **Read existing routes first**: Before writing any code, read at least two existing
   route files in `src/routes/` to understand the project's patterns
2. **Never edit** `src/routeTree.gen.ts` â€” it is auto-generated by TanStack Router
3. **Route file structure**:

```tsx
import { createFileRoute } from '@tanstack/react-router'

export const Route = createFileRoute('/path/')({
  component: PageComponent,
})

function PageComponent() {
  // component logic here
}
```

4. **Dynamic routes**: Use `$paramName` in the filename (e.g., `$paymentId.tsx`)
   - Access params via: `const { paramName } = Route.useParams()`

5. **Data fetching pattern** (when the page loads data):

```tsx
const [data, setData] = useState<Type | null>(null)
const [isLoading, setIsLoading] = useState(true)
const [error, setError] = useState<string | null>(null)

const loadData = useCallback(async () => {
  try {
    setIsLoading(true)
    setError(null)
    const result = await serviceFunction()
    setData(result)
  } catch (err) {
    setError(err instanceof Error ? err.message : 'An error occurred')
  } finally {
    setIsLoading(false)
  }
}, [])

useEffect(() => {
  loadData()
}, [loadData])
```

6. **Navigation**: Use `useNavigate()` from `@tanstack/react-router`
7. **Loading state**: Render a
   `<span className="loading loading-spinner loading-lg"></span>` centered
8. **Error state**: Render a `<div className="alert alert-error">` with the error message
9. **Styling**: DaisyUI 5 classes + Tailwind CSS 4 utilities, responsive layout
10. **Code style**: No semicolons, single quotes, trailing commas, 90-char width

## Steps

1. Read existing route files for reference (especially `src/routes/dashboard/index.tsx`
   and `src/routes/payments/$paymentId.tsx`)
2. Read `src/routes/__root.tsx` to understand the layout context
3. Create the route file
4. If the route should appear in the navbar, update `src/routes/__root.tsx` navLinks array
5. Run `npx tsc -b` to validate types
6. Inform the user to run `npm run dev` to trigger route tree regeneration
